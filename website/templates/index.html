{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Shrink.io - Home{% endblock %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    
</head>
<body>
    <div class="scroll-container">
        <section id="hero" class="full-page">
            <div class="inner-header flex">
                <div class="w3-container floating-image-jiggle floating-bot">
                    <img src='/static/image/index/hero/bot.png'/>
                </div>
                <div class="w3-container floating-image-jiggle floating-hand">
                    <img src='/static/image/index/hero/hand.png'/>
                </div>
                <div class="w3-container floating-image-jiggle floating-hand-thumb">
                    <img src='/static/image/index/hero/hand-thumb.png'/>
                </div>
                <div class="w3-container floating-image-icons floating-stethoscope">
                    <img src='/static/image/index/hero/stethoscope.png'/>
                </div>
                <div class="w3-container floating-image floating-image-5 slideshow">
                    <img src='/slideshow/[man;woman;bot]'/>
                </div>
                <div class="w3-row resizing" style="display:block;">
                    <div class="w3-container floating-image-icons floating-welcome-title">
                        <h2 class="resizing-2 title title-sm">Welcome to</h2>
                    </div>
                    <div class="w3-container floating-image-icons floating-project-title">
                        <h1 class="resizing-1 title title-lg">Shrink.io</h1>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-ai-therapy" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ’¬</div>
                        <h3>AI-Powered Therapy</h3>
                        <p>Experience personalized mental health support through advanced chatbot technology powered by GPT. Our AI system adapts to your unique needs, providing empathetic and insightful responses.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-avatar" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ¤–</div>
                        <h3>3D Avatar Interaction</h3>
                        <p>Engage with lifelike 3D avatars created by D-ID for a more immersive and comforting experience. These avatars enhance the feeling of human connection during your sessions.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-availability" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ•’</div>
                        <h3>24/7 Availability</h3>
                        <p>Access mental health support anytime, anywhere, ensuring help is always just a click away. Whether you're experiencing a late-night anxiety attack or need midday stress relief, we're here for you.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-security" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ”’</div>
                        <h3>Privacy & Security</h3>
                        <p>Your mental health information is sensitive. We employ state-of-the-art encryption and security measures to ensure your data remains confidential and protected.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="full-page">
            <div class="section-container">
                <br><br><br><br><br>
                <div class="feature">
                    <h3>About Shrink.io</h3>
                    <p>Shrink.io is at the forefront of mental health innovation, combining cutting-edge AI technology with evidence-based psychological practices. Our mission is to make mental health support accessible, affordable, and effective for everyone, everywhere.</p>
                    <p>Founded by a team of Computer Engineerings, clinical psychologists, and UX designers, Shrink.io represents a collaborative effort to address the global mental health crisis. We believe that by leveraging the power of artificial intelligence and immersive technologies, we can provide personalized, empathetic support at scale.</p>
                </div>
                <br><br><br><br><br>
            </div>
        </section>

        <section id="team" class="full-page">
            <div class="section-container">
                <br><br><br><br><br><br><br><br><br>
                <h3>Meet Our Team</h3>
                <br>
                <div class="authors">
                    <div class="author">
                        <img src='/static/image/authors/Ori_Tsemach.jpeg' alt="Ori Tsemach" width="180" height="180">
                        <h3>Ori Tsemach</h3>
                        <p>Computer Engineering</p>
                    </div>
                    <div class="author">
                        <img src="/static/image/authors/Eldar_Garrett.jpeg" alt="Eldar Garrett" width="180" height="180">
                        <h3>Eldar Garrett</h3>
                        <p>Computer Engineering</p>
                    </div>
                    <div class="author">
                        <img src="/static/image/authors/Sahar_Amar.jpeg" alt="Sahar Amar" width="180" height="180">
                        <h3>Sahar Amar</h3>
                        <p>Computer Engineering</p>
                    </div>
                </div>
                <br><br><br><br><br>
            </div>
        </section>

        <section id="testimonials" class="full-page testimonials">
            <div class="section-container">
                <div class="testimonial">
                    <h3>What Our Users Say</h3>
                    <br>
                    <div id="contentDiv">Initial Content</div>
                </div>
            </div>
        </section>

        <br><br><br><br><br><br>
    </div>

    {% block footer %}
        <div class="navbar-footer" style="position: fixed; bottom: 0px; width:100vw; height:15%;">
            <!--Waves Container-->
            <div>
                <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                    <defs>
                        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                    </defs>
                    <g class="parallax">
                        <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
                        <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
                        <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
                        <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
                    </g>
                </svg>
            </div>
            <!--Waves end-->

            <!--Content starts-->
            <div class="content flex">
                <p>Shrink.io | Free to use </p>
            </div>
            <!--Content ends-->
        </div>
    {% endblock %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tableData = JSON.parse(`{{ reviews | safe }}`);
            let currentIndex = 0;

            function updateContent() {
                // Get the current row
                const currentRow = tableData[currentIndex];

                const baseImageUrl = "{{ url_for('views.get_image', username='') }}";
                const defaultImageUrl = "{{ url_for('static', filename='image/default.png') }}";

                const imageUrl = currentRow.user_id !== "null"
                    ? `${baseImageUrl}${encodeURIComponent(currentRow.name)}`
                    : defaultImageUrl;
                const image = `<img class="review_user_picture" src="${imageUrl}" alt="User Image">`;

                const TPL_Results = () => `<div class="Results-item">
                    <h3 class="">${currentRow.name}: ${currentRow.title}</h3>` + image + `
                    <p class="testimonial-text">${currentRow.content}</p>`;
                
                let reviewHTML = TPL_Results()

                // Loop through the total number of stars
                for (let i = 1; i <= currentRow.stars; i++) {
                    if (i <= currentRow.stars) {
                        // If the current index is less than or equal to the rating, use a filled star
                        reviewHTML += '<span class="star filled-star"></span>';
                    } else {
                        // Otherwise, use an empty star
                        reviewHTML += '<span class="star empty-star"></span>';
                    }
                }

                reviewHTML += `<p class="">${currentRow.submitted_at}</p></div>`;
                  
                  document.querySelector("#contentDiv").innerHTML = reviewHTML;

                // Move to the next index
                currentIndex = (currentIndex + 1) % tableData.length;
            }

            // Initial content update
            updateContent();
            // Update content every 5 second
            setInterval(updateContent, 5000);
        });
    </script>
</body>
{% endblock %}