{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Shrink.io - Home{% endblock %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    
</head>
<body>
    <div class="scroll-container">
        <section id="hero" class="full-page">
            <!-- <div class="section-container">
                <h1>Shrink.io</h1>
                <p class="tagline">Revolutionizing Mental Health Care with AI</p>
                <a href="#contact" class="btn">Get Started</a>
            </div> -->
            <div class="inner-header flex">
                <div class="w3-container floating-image-jiggle floating-bot">
                    <img src='/static/image/index/hero/bot.png'/>
                </div>
                <div class="w3-container floating-image-jiggle floating-hand">
                    <img src='/static/image/index/hero/hand.png'/>
                </div>
                <div class="w3-container floating-image-icons floating-stethoscope">
                    <img src='/static/image/index/hero/stethoscope.png'/>
                </div>
                <div class="w3-container floating-image">
                    <img src='/slideshow/[man;woman;bot]'/>
                </div>
                <div class="w3-row resizing" style="display:block;">
                    <div class="w3-container">
                        </br>
                        <h2 class="resizing-2 pad-top title title-sm">Welcome to</h2>
                    </div>
                    <div class="w3-container">
                        <h1 class="resizing-1 title title-lg">Shrink.io</h1>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-ai-therapy" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ’¬</div>
                        <h2>AI-Powered Therapy</h2>
                        <p>Experience personalized mental health support through advanced chatbot technology powered by GPT. Our AI system adapts to your unique needs, providing empathetic and insightful responses.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-avatar" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ¤–</div>
                        <h2>3D Avatar Interaction</h2>
                        <p>Engage with lifelike 3D avatars created by D-ID for a more immersive and comforting experience. These avatars enhance the feeling of human connection during your sessions.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-availability" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ•’</div>
                        <h2>24/7 Availability</h2>
                        <p>Access mental health support anytime, anywhere, ensuring help is always just a click away. Whether you're experiencing a late-night anxiety attack or need midday stress relief, we're here for you.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-tracking" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ“Š</div>
                        <h2>Progress Tracking</h2>
                        <p>Monitor your mental health journey with our comprehensive tracking tools. Visualize your progress, set goals, and celebrate your achievements along the way.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-security" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ”’</div>
                        <h2>Privacy & Security</h2>
                        <p>Your mental health information is sensitive. We employ state-of-the-art encryption and security measures to ensure your data remains confidential and protected.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="feature-library" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <div class="feature-content">
                        <div class="feature-icon">ðŸ“š</div>
                        <h2>Resource Library</h2>
                        <p>Access a wealth of mental health resources, including articles, videos, and exercises, curated by our team of experts to support your wellness journey.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="full-page">
            <div class="section-container">
                <div class="feature">
                    <h2>About Shrink.io</h2>
                    <p>Shrink.io is at the forefront of mental health innovation, combining cutting-edge AI technology with evidence-based psychological practices. Our mission is to make mental health support accessible, affordable, and effective for everyone, everywhere.</p>
                    <p>Founded by a team of Computer Engineerings, clinical psychologists, and UX designers, Shrink.io represents a collaborative effort to address the global mental health crisis. We believe that by leveraging the power of artificial intelligence and immersive technologies, we can provide personalized, empathetic support at scale.</p>
                </div>
            </div>
        </section>

        <section id="team" class="full-page">
            <div class="section-container">
                <h2>Meet Our Team</h2>
                <div class="authors">
                    <div class="author">
                        <img src='/static/image/authors/Ori_Tsemach.jpeg' alt="Ori Tsemach, AI Specialist" width="180" height="180">
                        <h3>Ori Tsemach</h3>
                        <p>Computer Engineering</p>
                    </div>
                    <div class="author">
                        <img src="https://picsum.photos/seed/author2/180/180" alt="Eldar Garrett, Computer Engineering" width="180" height="180">
                        <h3>Eldar Garrett</h3>
                        <p>Computer Engineering</p>
                    </div>
                    <div class="author">
                        <img src="https://picsum.photos/seed/author3/180/180" alt="Sahar Amar, UX Designer" width="180" height="180">
                        <h3>Sahar Amar</h3>
                        <p>Computer Engineering</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials" class="full-page testimonials">
            <div class="section-container">
                <h2>What Our Users Say</h2>
                <div class="testimonial">
                    <p class="testimonial-text">"Shrink.io has been a game-changer for my mental health. The AI-powered conversations feel surprisingly human, and the 24/7 availability means I always have support when I need it most."</p>
                    <p class="testimonial-author">- Alex J., Shrink.io User</p>
                </div>
            </div>
        </section>

        <section id="contact" class="full-page">
            <div class="section-container">
                <h2>Get in Touch</h2>
                <div class="contact-form">
                    <form>
                        <div class="form-group">
                            <label for="name">Name:</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message:</label>
                            <textarea id="message" name="message" required></textarea>
                        </div>
                        <button type="submit" class="btn">Send Message</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    {% block footer %}
        <div class="navbar-footer" style="position: fixed; bottom: 0px; width:100vw; height:15%;">
            <!--Waves Container-->
            <div>
                <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                    <defs>
                        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                    </defs>
                    <g class="parallax">
                        <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
                        <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
                        <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
                        <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
                    </g>
                </svg>
            </div>
            <!--Waves end-->

            <!--Content starts-->
            <div class="content flex">
                <p>Shrink.io | Free to use </p>
            </div>
            <!--Content ends-->
        </div>
    {% endblock %}

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollContainer = document.querySelector('.scroll-container');
            const sections = document.querySelectorAll('.full-page');
            let isScrolling = false;
            let currentSection = 0;

            function debounce(func, wait = 200, immediate = true) {
                let timeout;
                return function() {
                    const context = this, args = arguments;
                    const later = function() {
                        timeout = null;
                        if (!immediate) func.apply(context, args);
                    };
                    const callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) func.apply(context, args);
                };
            }

            function smoothScroll(el, duration) {
                const start = scrollContainer.scrollTop;
                const end = el.offsetTop;
                const change = end - start;
                const increment = 100;
                let currentTime = 0;

                const animateScroll = function() {
                    currentTime += increment;
                    const val = Math.easeInOutQuad(currentTime, start, change, duration);
                    scrollContainer.scrollTop = val;
                    if (currentTime < duration) {
                        requestAnimationFrame(animateScroll);
                    } else {
                        isScrolling = false;
                    }
                };
                animateScroll();
            }

            Math.easeInOutQuad = function (t, b, c, d) {
                t /= d/2;
                if (t < 1) return c/2*t*t + b;
                t--;
                return -c/2 * (t*(t-2) - 1) + b;
            };

            const handleScroll = debounce(function(e) {
                if (!isScrolling) {
                    isScrolling = true;
                    if (e.deltaY > 0 && currentSection < sections.length - 1) {
                        currentSection++;
                    } else if (e.deltaY < 0 && currentSection > 0) {
                        currentSection--;
                    }
                    smoothScroll(sections[currentSection], 1000);
                }
            });

            scrollContainer.addEventListener('wheel', handleScroll, { passive: false });

            let touchStartY = 0;
            let touchEndY = 0;
            let lastTouchTime = 0;

            scrollContainer.addEventListener('touchstart', function(e) {
                touchStartY = e.touches[0].clientY;
                lastTouchTime = new Date().getTime();
            }, { passive: true });

            scrollContainer.addEventListener('touchend', function(e) {
                touchEndY = e.changedTouches[0].clientY;
                const touchTime = new Date().getTime() - lastTouchTime;
                const diff = touchStartY - touchEndY;

                if (touchTime < 300 && Math.abs(diff) > 30) {
                    if (!isScrolling) {
                        isScrolling = true;
                        if (diff > 0 && currentSection < sections.length - 1) {
                            currentSection++;
                        } else if (diff < 0 && currentSection > 0) {
                            currentSection--;
                        }
                        smoothScroll(sections[currentSection], 600);
                    }
                }
            }, { passive: true });

            document.querySelectorAll('.nav-links a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    currentSection = Array.from(sections).indexOf(targetSection);
                    smoothScroll(targetSection, 1000);
                });
            });

            const menuToggle = document.querySelector('.menu-toggle');
            const navLinks = document.querySelector('.nav-links');

            menuToggle.addEventListener('click', function() {
                navLinks.classList.toggle('active');
            });

            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    navLinks.classList.remove('active');
                });
            });

            function updateActiveNavLink() {
                const navLinks = document.querySelectorAll('.nav-links a');
                navLinks.forEach(link => {
                    const sectionId = link.getAttribute('href').substring(1);
                    const section = document.getElementById(sectionId);
                    if (section === sections[currentSection]) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }

            const readyHandler = function() {
                updateActiveNavLink();
            }

            const scrollHandler = debounce(function() {
                updateActiveNavLink();
            });

            scrollContainer.addEventListener('scroll', scrollHandler);
            window.addEventListener('load', readyHandler); 
            window.addEventListener('resize', readyHandler);
            readyHandler();
        });
    </script>
</body>
{% endblock %}